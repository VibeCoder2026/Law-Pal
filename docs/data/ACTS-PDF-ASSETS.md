# Acts PDF Delivery (On-Demand)

## Goal

Keep the base app size small and let users download Acts PDFs only when needed.

## Current Flow

1. User opens an Act.
2. App checks the local cache at:
   `FileSystem.documentDirectory/pdfs/<category>/<filename>.pdf`
3. If the file exists, it opens immediately.
4. If missing, the UI offers **Download** and **Open in Browser**.
5. Downloaded files are cached for offline use on future opens.

## URL Map

- Source map: `src/assets/acts-pdf-urls.json`
- Key format: `<category>/<filename>.pdf`
- Generated by: `node tools/build-pdf-url-map.js`

## Code Path

- `src/screens/ActPdfViewerScreen.tsx` uses `expo-file-system/legacy`.
- `pdfKey` is the full path (category + filename), so the cache path mirrors that structure.

## Notes

- `law_sources/**` is no longer bundled into the APK.
- The Gradle asset copy plugin (`withLawSourcesAssets`) is legacy and not required.
- If a map entry is missing, the UI shows "PDF is not available for download yet".

## Quick Check

1. Open an Act and tap Download.
2. Confirm the file exists at:
   `FileSystem.documentDirectory/pdfs/<category>/<filename>.pdf`
3. Reopen the Act offline to verify cached loading.
